---
import Layout from '@/layouts/Layout.astro';
import Header from '@/components/svelte/Header.svelte';
import UserProfileLoader from '@/components/svelte/UserProfileLoader.svelte';
import { sanitizeUsername } from '@/lib/validation/hive';

const { username: rawUsername } = Astro.params;

const username = sanitizeUsername(rawUsername);

if (!username) {
	return Astro.redirect('/');
}
---

<Layout title={`@${username} | Immutable Runes`}>
	<Header client:load />
	<UserProfileLoader username={username} client:load />
</Layout>
