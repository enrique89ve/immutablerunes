---
import Layout from '@/layouts/Layout.astro';
import Header from '@/components/svelte/Header.svelte';
import ImageViewer from '@/components/svelte/ImageViewer.svelte';
import { sanitizeTxid } from '@/lib/validation/hive';
import { getLangFromUrl, useTranslations } from '@/i18n/config';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const { txid: rawTxid } = Astro.params;

const txid = sanitizeTxid(rawTxid);

if (!txid) {
	return Astro.redirect('/explore');
}

const pageTitle = `Pixel Art | ${t('header.brandName')}`;
const pageDescription = t('home.hero.subtitle');
const ogImageUrl = `${Astro.url.origin}/api/og/${txid}`;
---

<Layout
	title={pageTitle}
	description={pageDescription}
	ogImage={ogImageUrl}
	ogType="article"
	twitterCard="summary_large_image"
>
	<Header client:load />
	<ImageViewer txid={txid} client:load />
</Layout>
